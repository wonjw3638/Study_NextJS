# 리퀘스트 메모이제이션

리퀘스트 메모이제이션 : 리액트에서 fetch API를 확장하여 동일한 URL과 파라미터를 가진 요청을 자동으로 메모이제이션 하는 기능

라우트를 구성하는 각기 다른 레벨에 존재하는 컴포넌트들이 동일한 데이터에 접근 할 때, 최상위 컴포넌트에서 페칭한 데이터를 일일이 props를 통해 전달할 필요 없이 각 컴포넌트에서 데이터를 페칭하는 형태

예시) 동일한 요청이 발생하면 요청이 실행되지 않고 메모리에 존재하는 캐싱된 데이터가 반환됨
**최종적으로 라우트가 모두 렌더링되면 메모리가 초기화되고 모든 리퀘스트 메모이제이션 항목이 지워짐**

- 리퀘스트 메모이제이션은 리액트에서 제공하는 기능
- fetch 요청의 GET메서드에만 적용됨
- 리액트 컴포넌트 트리에만 적용됨
- .... 서버 컴포넌트의 fetch 요청에 적용됨
- 라우트 핸들러는 fetch 요청이 메모이제이션 되지 않음
- fetch가 적합하지 않은 경우, cache()를 사용하여 메모이제이션


지속시간 : 리퀘스트 메모이제이션의 캐시는 서버요청의 수명(한 번의 렌더링 사이클) 동안 유지
재검증 : 서버 요청간에 공유되지 않고, 렌더링 동안에만 적용
캐싱 제외 : 리퀘스트 메모이제이션은 fetch 요청의 GET메서드에만 적용


## 데이터 캐시
데이터 캐시 : Next.js 에서 제공하는 기능, 데이터 페칭 결과를 서버 요청 및 배포 간에 지속시키기 위한 캐시
캐싱에서 제외하도록 옵션을 설정한 경우에는 결과는 항상 실제 데이터 소스에서 가져오며, 메모이제이션 됨

데이터 캐싱 여부와 상관 없이, 동일한 데이터에 대한 중복 요청을 피하기 위해 리퀘스트는 항상 메모이제이션 됨

데이터 캐시와 메모이제이션 차이점
- 데이터 캐시 : 들어오는 요청 및 배포 간에 지속 (원본 데이터에 대한 요청 수를 줄임)
- 메모이제이션 : 요청의 수명 동안만 지속 (동일한 렌더링 패스에서 중복 요청 수를 줄임)

지속시간 : 들어오는 요청 및 배포 간에 지속
재검증
- 시간 기반 재검증
- 온디맨드 재검증
캐싱제외 : fetch 옵션에 cache : 'no-store'

